#!/bin/bash

# Useful info found at http://www.linuxjournal.com/content/more-using-bash-complete-command

mu_complete() {
    local cmd="${1##*/}"
    local word=${COMP_WORDS[COMP_CWORD]}
    local line=${COMP_LINE}
    local words=($line) # split line into words
    local lastchar="${line: -1}"
    local wordcount=${#words[@]}

    # echo "Words is ${words[0]},${words[1]},${words[2]},${words[3]},${words[4]} !!"

    # echo "Word two is '${words[2]}'"

    case ${words[1]} in
        project)
            case ${words[2]} in
                new)
                    ;;
                doc)
                    ;;
                *)
                    COMPREPLY=(`compgen -W "new doc" $word`)
                    ;;
            esac
            ;;
        service)
            case ${words[2]} in
                new)
                    case ${words[3]} in
                        ruby)
                            ;;
                        javascript)
                            ;;
                        *)
                            COMPREPLY=(`compgen -W "ruby javascript" $word`)
                            ;;
                    esac
                    ;;
                *)
                    COMPREPLY=(`compgen -W "new" $word`)
                    ;;
            esac
            ;;
        migration)
            case ${words[2]} in
                new)
                    ;;
                *)
                COMPREPLY=(`compgen -W "new" $word`)
            esac
            ;;
        *)
            COMPREPLY=(`compgen -W "project service migration" $word`)
            ;;
    esac
}

complete -F mu_complete mu
